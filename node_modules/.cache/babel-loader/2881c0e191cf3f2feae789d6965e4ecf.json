{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\BookBazaar-main\\\\BookBazaar-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\BookBazaar-main\\\\BookBazaar-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\BookBazaar-main\\\\BookBazaar-main\\\\src\\\\pages\\\\PurchaseHistory.js\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCircleNotch, faFaceFrown } from \"@fortawesome/free-solid-svg-icons\";\nimport InCartContext from \"../store/favorites-context\";\nimport BookList from \"../components/BookList\";\nimport classes from \"../components/PurchaseHistory.module.css\";\nfunction PurchaseHistory() {\n  var _this = this;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loadedPurchases = _useState4[0],\n    setLoadedPurchases = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    flag = _useState6[0],\n    setFlag = _useState6[1];\n  var favoritesCtx = useContext(InCartContext);\n  useEffect(function () {\n    fetch(\"https://bookbazaar-cc648-default-rtdb.firebaseio.com/userHistory.json\").then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      var records;\n      var _loop = function _loop(key) {\n        var record = _objectSpread({\n          id: key\n        }, data[key]);\n        var listData = {};\n        if (favoritesCtx.adminAccess || record.Email === favoritesCtx.userEmail) {\n          setFlag(false);\n          records = /*#__PURE__*/React.createElement(\"div\", {\n            className: \"block\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.email,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 17\n            }\n          }, \"Email : \", record.Email), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.time,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 17\n            }\n          }, \"The Purchase Time is : \", record.Time), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"flex\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(BookList, {\n            books: record.PurchaseHistory,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 19\n            }\n          })));\n          listData = {\n            id: record.id,\n            content: records\n          };\n        }\n        setLoadedPurchases(function (loadedPurchases) {\n          return loadedPurchases.concat(listData);\n        });\n      };\n      for (var key in data) {\n        _loop(key);\n      }\n      setIsLoading(false);\n    });\n  }, [favoritesCtx.userEmail, favoritesCtx.adminAccess]);\n  if (isLoading) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App App-header App-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCircleNotch,\n    size: \"5x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }));\n  if (flag) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"face\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faFaceFrown,\n    size: \"5x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"You haven't Purchased Anything Yet !\"));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, loadedPurchases.map(function (dd) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: dd.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 16\n      }\n    }, dd.content);\n  }));\n}\nexport default PurchaseHistory;","map":{"version":3,"names":["useState","useEffect","useContext","FontAwesomeIcon","faCircleNotch","faFaceFrown","InCartContext","BookList","classes","PurchaseHistory","isLoading","setIsLoading","loadedPurchases","setLoadedPurchases","flag","setFlag","favoritesCtx","fetch","then","response","json","data","records","key","record","id","listData","adminAccess","Email","userEmail","email","time","Time","content","concat","map","dd"],"sources":["C:/Users/ASUS/Downloads/BookBazaar-main/BookBazaar-main/src/pages/PurchaseHistory.js"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCircleNotch, faFaceFrown } from \"@fortawesome/free-solid-svg-icons\";\r\nimport InCartContext from \"../store/favorites-context\";\r\nimport BookList from \"../components/BookList\";\r\nimport classes from \"../components/PurchaseHistory.module.css\";\r\nfunction PurchaseHistory() {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [loadedPurchases, setLoadedPurchases] = useState([]);\r\n  const [flag, setFlag] = useState(true);\r\n\r\n  const favoritesCtx = useContext(InCartContext);\r\n\r\n  useEffect(() => {\r\n    fetch(\r\n      \"https://bookbazaar-cc648-default-rtdb.firebaseio.com/userHistory.json\"\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        let records;\r\n\r\n        for (const key in data) {\r\n          const record = {\r\n            id: key,\r\n            ...data[key],\r\n          };\r\n          let listData = {};\r\n          if (\r\n            favoritesCtx.adminAccess ||\r\n            record.Email === favoritesCtx.userEmail\r\n          ) {\r\n            setFlag(false);\r\n            records = (\r\n              <div className=\"block\">\r\n                <div className={classes.email}>Email : {record.Email}</div>\r\n                <div className={classes.time}>The Purchase Time is : {record.Time}</div>\r\n\r\n                <div className=\"flex\">\r\n                  <BookList books={record.PurchaseHistory} />\r\n                </div>\r\n              </div>\r\n            );\r\n            listData = {\r\n              id: record.id,\r\n              content: records,\r\n            };\r\n          }\r\n          setLoadedPurchases((loadedPurchases) =>\r\n            loadedPurchases.concat(listData)\r\n          );\r\n        }\r\n        setIsLoading(false);\r\n      });\r\n  }, [favoritesCtx.userEmail, favoritesCtx.adminAccess]);\r\n  if (isLoading)\r\n    return (\r\n      <div className=\"App App-header App-logo\">\r\n        <FontAwesomeIcon icon={faCircleNotch} size=\"5x\" />\r\n      </div>\r\n    );\r\nif(flag)\r\n      return (\r\n        <div className=\"face\">\r\n          <div>\r\n            <FontAwesomeIcon icon={faFaceFrown} size=\"5x\" />\r\n          </div>\r\n  \r\n          <div >You haven't Purchased Anything Yet !</div>\r\n        </div>\r\n      );\r\n  return (\r\n    <div>\r\n      {loadedPurchases.map((dd) => {\r\n        return <div key={dd.id}>{dd.content}</div>;\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PurchaseHistory;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}